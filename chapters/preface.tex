\phantomsection
\addcontentsline{toc}{chapter}{Preface}
\chapter*{Preface}

This is a thesis in the mathematical sciences, with emphasis on the mathematics.
But before we get to the category theory, I want to say a few words about the
scientific tradition in which this thesis is situated.

Mathematics is the language of science. Twinned so intimately with physics, over
the past centuries mathematics has become superb---indeed, unreasonably
effective---language for understanding planets moving in space, particles in a
vacuum, the structure of spacetime, and so on.  Yet, while Wigner speaks of the
unreasonble effectiveness of mathematics in the natural sciences, equally
eminent mathematicians, not least Gelfand, speak of the unreasonable
\emph{ineffectiveness} of mathematics in biology and related fields. Why such a
difference?

A contrast between physics and biology is that while physical systems can often
be studied in isolation---the particle in a vacuum---, biological systems are
necessarily situated in their environment. A heart belongs in a body, an ant in
a colony. One of the first to draw attention to this contrast was Ludwig on
Bertalanffy, biologist and founder of general systems theory, who articulated
the difference as one between closed and open systems: 
\begin{quote}
  Conventional physics deals only with closed systems, i.e. systems which are
  considered to be isolated from their environment. \dots\ However, we find
  systems which by their very nature and definition are not closed systems.
  Every living organism is essentially an open system. It maintains itself in a
  continuous inflow and outflow, a building up and breaking down of components,
  never being, so long as it is alive, in a state of chemical and thermodynamic
  equilibrium but maintained in a so-called steady state which is distinct from
  the latter \cite{Ber68}.
\end{quote}
While von Bertalanffy's general systems theory is still approaching its
generalist ambition, his philosophy has had great impact in his home field of
biology, leading to the modern field of systems biology. Half a century later,
Dennis Noble, another great pioneer of systems biology and the originator of the
first mathematical model of a working heart, describes the shift as one from
reduction to integration.
\begin{quote}
  Systems biology\dots\ is about putting together rather than taking apart,
  integration rather than reduction. It requires that we develop ways of
  thinking about integration that are as rigorous as our reductionist
  programmes, but different \cite{Nob06}.
%\dots\ It means changing our philosophy, in the full sense of the term 
\end{quote}
In this thesis we develop rigorous ways of thinking about integration or, as we
refer to it, interconnection.

Interconnection and openness are tightly related. Indeed, openness implies that
a system may be interconnected with its environment. But what is an environment
but comprised of other systems? Thus the study of open systems becomes the study
of how a system changes under interconnection with other systems.

To model this, we must begin by creating language to describe the
interconnection of systems. While reductionism hopes that phenomena can be
explained by reducing them to ``elementary units investigable independently of
each other'' \cite{Ber68}, this philosophy of integration introduces as an
additional and equal priority the investigation of the way these units are
interconnected. As such, this thesis is predicated on the hope that the meaning
of an expression in our new language is determined by the meanings of its
constituent expressions together with the syntactic rules combining them. This
is known as the principle of compositionality. 

Also commonly known as Frege's principle, the principle of compositionality and
its precise meaning and applicability both dates back to Ancient Greek and Vedic
philosophy, and is still the subject of active research today
\cite{Jan86,Sza13}. More recently, through the work of Montague \cite{Mon70} in
natural language semantics and Strachey and Scott \cite{SS71} in programming
languages semantics, the principle of compositionality has found formal
expression as the dictum that the interpretation of a language should be given
by a homomorphism between an algebra of syntactic representations and an algebra
of semantic objects. We too shall follow this route.

The question then arises: what do we mean by algebra? This mathematical question
leads us back to our scientific objectives: what do we mean by system? Here we
must narrow, or at least define, our scope. We give some examples. The
investigations of thesis began with electrical circuits and their diagrams, and
we will devote significant time to exploring their compositional formulation. We
discussed biological systems above, and our notion of system includes these,
modelled say in the form of chemical reaction networks or Markov processes, or
the compartmental models of epidemiology, population biology, and ecology. From
computer science, we consider Petri nets, automata, logic circuits, and similar.
More abstractly, our notion of system encompasses matrices and systems of
differential equations. 

Drawing together these notions of system are well-developed diagrammatic
representations based on network diagrams---that is, topological graphs. We call
these network-style diagrammatic languages. In the abstract, by system we shall
simply mean that which can be represented by box with a collection of terminals,
perhaps of different types, through which it interfaces with the surroundings.
Concretely, one might envision a circuit diagram with terminals, such as
\[
\begin{tikzpicture}[circuit ee IEC, set resistor graphic=var resistor IEC graphic]
\node[contact] (I1) at (0,0) {};
\node[contact] (O1) at (3,0) {};
\node (input) at (-2,0) {\small{\textsf{terminal}}};
\node (output) at (5,0) {\small{\textsf{terminal}}};
\draw (I1) 	to [resistor] node [above]
{$1\Omega$} (O1);
\path[color=gray, very thick, shorten >=10pt, ->, >=stealth] (input) edge (I1);	
\path[color=gray, very thick, shorten >=10pt, ->, >=stealth] (output) edge (O1);
\end{tikzpicture}
\]
or
\[
\begin{tikzpicture}[circuit ee IEC, set resistor graphic=var resistor IEC graphic]
\node[contact] (I1) at (0,2) {};
\node[contact] (I2) at (0,0) {};
\coordinate (int1) at (2.83,1) {};
\coordinate (int2) at (5.83,1) {};
\node[contact] (O1) at (8.66,2) {};
\node[contact] (O2) at (8.66,0) {};
\node (input) at (-2,1) {\small{\textsf{terminals}}};
\node (output) at (10.66,1) {\small{\textsf{terminals}}};
\draw (I1) 	to [resistor] node [label={[label distance=2pt]85:{$1\Omega$}}] {} (int1);
\draw (I2)	to [resistor] node [label={[label distance=2pt]275:{$1\Omega$}}] {} (int1)
				to [resistor] node [label={[label distance=3pt]90:{$2\Omega$}}] {} (int2);
\draw (int2) 	to [resistor] node [label={[label distance=2pt]95:{$1\Omega$}}] {} (O1);
\draw (int2)		to [resistor] node [label={[label distance=2pt]265:{$3\Omega$}}] {} (O2);
\path[color=gray, very thick, shorten >=10pt, ->, >=stealth, bend left] (input) edge (I1);		\path[color=gray, very thick, shorten >=10pt, ->, >=stealth, bend right] (input) edge (I2);		
\path[color=gray, very thick, shorten >=10pt, ->, >=stealth, bend right] (output) edge (O1);
\path[color=gray, very thick, shorten >=10pt, ->, >=stealth, bend left] (output) edge (O2);
\end{tikzpicture}
\]
The algebraic structure of interconnection is then simply the structure that
results from the ability to connect terminals of one system with terminals of
another. This graphical approach motivates our language of interconnection:
indeed, these diagrams will be the expressions of our language.

We claim that the existence of a network-style diagrammatic language to
represent a system implies that interconnection is inherently important in
understanding the system. Yet, while each of these example notions of system are
well-studied in and of themselves, their compositional, or algebraic, structure
has received scant attention. In this thesis, we study an algebraic structure
called a hypergraph category, and argue that this is the relevant algebraic
structure for modelling interconnection of open systems. 

Given these pre-existing diagrammatic formalisms and our visual intuition,
constructing algebras of syntactic representations is thus rather
straightforward. The semantics and their algebraic structure are more subtle. 

In some sense our semantics is already given to us too: in studying these
systems as closed systems, scientists have already formalised the meaning of
these diagrams. But we have shifted from a closed perspective to an open one,
and we need our semantics to also account for points of interconnection.

Taking inspiration from Willems' behavioural approach \cite{Wi} and Deutsch's
constructor theory \cite{Deu}, in this thesis I advocate the following position.
First, at each terminal of an open system we may make measurements appropriate
to the type of terminal. Given a collection of terminals, the \emph{universum}
is then the set of all possible measurement outcomes. Each open system has a
collection of terminals, and hence a universum. The semantics of an open system
is the subset of measurement outcomes on the terminals that are permitted by the
system. This is known as the \emph{behaviour} of the system.

For example, consider a resistor of resistance $r$. This has two terminals---the
two ends of the resistor---and at each terminal, we may measure the potential
and the current. Thus the universum of this system is the set
$\mathbb{R}\oplus\mathbb{R}\oplus\mathbb{R}\oplus\mathbb{R}$, where the summands
represent respectively the potentials and currents at each of the two terminals.
The resistor is governed by Kirchhoff's current law, or conservation of charge,
and Ohm's law.  Conservation of charge states that the current flowing into one
terminal must equal the current flowing out of the other terminal, while Ohm's
law states that this current will be proportional to the potential difference,
with constant of proportionality $1/r$. Thus the behaviour of the resistor is
the set 
\[
  \big\{\big(\phi_1,\phi_2,
    -\tfrac1r(\phi_2-\phi_1),\tfrac1r(\phi_2-\phi_1)\big)\,\big\vert\,
    \phi_1,\phi_2 \in \mathbb{R}\big\}.
\]
Note that in this perspective a law such as Ohm's law is a mechanism for
partitioning \emph{behaviours} into possible and impossible
behaviours.\footnote{That is, given a universum $\mathcal U$ of trajectories, a
  behaviour of a system is an element of the power set $\mathcal P(\mathcal
U)$ representing all possible measurements of this system, and a law or principle
is an element of $\mathcal P(\mathcal P(\mathcal U))$ representing all possible
behaviours of a class of systems.}

Interconnection of terminals then asserts the identification of the variables at
the identified terminals. Fixing some notion of open system and subsequently an
algebra of syntactic representations for these systems, our approach, based on
the principle of compositionality, requires this to define an algebra of
semantic objects and a homomorphism from syntax to semantics. The first part of
this thesis develops the mathematical tools necessary to pursue this vision for
modelling open systems and their interconnection. 

The next goal is to demonstrate the efficacy of this philosophy in applications.
At core, this work is done in the faith that the right language allows deeper
insight into the underlying structure. Indeed, after setting up such a language
for open systems there are many questions to be asked: Can we find a sound and
complete logic for determining when two syntactic expressions have the same
semantics? Suppose we have systems have some property, like being controllable.
In what ways can we interconnect controllable systems so that the combined
system is also controllable? Can we compute the semantics of a large system
quicker by computing the semantics of subsystems and then composing them?  If I
want a given system to acheive a specified trajectory, can I interconnect
another system to make it do so? How do two different notions of system, such as
circuit diagrams and signal flow graphs, relate to each other? Can I find
homomorphisms between their syntactic and semantic algebras? In the second part
of this thesis we explore some applications in depth, providing answers to
questions of the above sort.

\subsection*{Related work}
%\addcontentsline{toc}{section}{Related work}

The work here is underpinned not just by philosophical precedent, but by a rich
tradition in mathematics, physics, and computer science. First and foremost, it
draws from category theory and the pioneering work of Joyal and
Street on string diagrams for monoidal categories \cite{JS91,JS93}.

and conversely monoidal categories
provide an algebraic foundation for the intuitions behind Feynman diagrams.  The
key insight is the use of categories where morphisms describe physical
processes, rather than structure-preserving maps between mathematical objects
\cite{BaezStay,CP}
 
  compositional accounts of semantics associated to topological
diagrams has long been a technique associated with topological
quantum field theory, dating back to \cite{At}.

These techniques have filtered into more immediate applications, particularly in
computation and quantum computation \cite{AC04,Ba1,Sel07}. 
Kindergarten quantum mechanics. 

Category-theoretic frameworks for general systems theory have been developed
before. Notably Goguen and Rosen led efforts. Goguen from a more computer
science perspective, Rosen more in biology.


Work on categorical approaches to control systems goes back at least to Goguen
\cite{Go} and Arbib and Manes \cite{AM}. 

Cospans are already familiar as a formalism for making entities with an
arbitrarily designated `input end' and `output end' into the morphisms of a
category.  For example, in topological quantum field theory we use special
cospans called `cobordisms' to describe pieces of spacetime \cite{BL,BaezStay}.

An advantage of the decorated cospan framework is that the resulting categories
are hypergraph categories, and the resulting functors respect this structure.
As dagger compact categories, hypergraph categories themselves have a rich
diagrammatic nature \cite{Sel11}, and in cases when our decorated cospan categories
are inspired by diagrammatic applications, the hypergraph structure provides
language to describe natural operations on our diagrams, such as juxtaposing,
rotating, and reflecting them.

At the present time, 

it has most recently had
significant influence in the nascent field of categorical network theory, with
application to automata and computation \cite{KSW2, Sp}, electrical circuits
\cite{BF}, signal flow diagrams \cite{BSZ, BE}, Markov processes \cite{BFP,
ASW}, and dynamical systems \cite{VSL}, among others. 

applying string diagrams to engineering, with the aim of
giving diverse diagram languages a unified foundation based on category theory
\cite{KSW,RSW05}. 

Baez and Erbele
\cite{BE}, Vagner, Spivak, and Lerman \cite{VSL}, as well as Bonchi,
Soboc\'inski, and Zanasi \cite{BSZ,BSZ2,BSZ3,Za}. 


Spivak operad approach

Most similar is the work of Walters, together with Sabadini and Rosebrugh. In
particular, automata.

cospans and colimits



\subsection*{Organisation of this thesis}
%\addcontentsline{toc}{section}{Organisation of this thesis}

This thesis is divided into two parts. Part I, comprising Chapters
\ref{ch.hypcats} to \ref{ch.deccorels}, focusses on mathematical foundations. In
it we develop the theory of hypergraph categories and a powerful tool for
defining and manipulating them: decorated corelations. Part II, comprising
Chapters \ref{ch.sigflow} to \ref{ch.further}, then discusses applications of
this theory to examples of open systems.

Chapter \ref{ch.hypcats} introduces hypergraph categories. These are symmetric
monoidal categories in which every object is equipped with the structure of a
special commutative Frobenius monoid in a way compatible with the monoidal
product. As we will rely heavily on properties of monoidal categories, their
functors, and their graphical calculus, we begin with a whirlwind review of
these ideas. We then provide a definition of hypergraph categories, a
strictification theorem, and an important example: the category of cospans in a
category with finite colimits.

Cospans and their composition, using pushouts, 

Chapter \ref{ch.deccospans}

Chapter \ref{ch.corelations}

Chapter \ref{ch.deccorels}

The central message of decorated corelations is that hypergraph structure
requires some sort of uniformity in the composition rule, and it is easier to
work by acknowledging this structure, defining them as algebras over some
theory. 

Hypergraph categories are really just $\Set$-valued lax symmetric monoidal
functors: and these, being simply data structures, are often simpler to work
with.


Then applications. Chapter \ref{ch.sigflow} First to control theory from this behavioural perspective,
demonstrating the ideas of black boxing and corelations, open systems and
control by interconnection. We give a new characterisation of controllability.
Second to passive linear networks, which speaks to the idea that we can find
isomorphisms across disciplines, and explore the insights in new ways.

Chapter \ref{ch.circuits}

Chapter \ref{ch.further}


\subsection*{Statement of work}
%\addcontentsline{toc}{section}{Statement of work}

The Examination Schools make the following request:
\begin{quote}
\emph{Where some part of the thesis is not solely the work of the candidate or
has been carried out in collaboration with one or more persons, the candidate
shall submit a clear statement of the extent of his or her own contribution.}
\end{quote}
I address this now. 

The first four chapters are my own work. The applications chapters were
developed with collaborators. 

Chapter \ref{ch.sigflow} arises from a weekly seminar with Paolo Rapisarda and
Pawe\l\ Soboc\'inski at Southampton in the Spring of 2015. The text is a minor
adaptation of that in the paper \cite{FRS16}. For that paper I developed the
corelation formalism, providing a first draft. Pawe\l\ provided much expertise
in signal flow graphs, significantly revising the text and contributing the
section on operational semantics. Paolo contributed comparisons to classical
methods in control theory.  A number of anonymous referees contributed helpful
and detailed comments.

Chapter \ref{ch.circuits} is joint work with John Baez; the majority of the text
is taken from our paper \cite{BF}. For that paper John supplied writing on
Dirichlet forms and the principle of minimum power that became the second
section of Chapter \ref{ch.circuits}, as well as parts of the next two sections.
I produced a first draft of the rest of the paper. We collaboratively revised
the text for publication.

\subsection*{Acknowledgements}
%\addcontentsline{toc}{section}{Acknowledgements}
I thank my supervisors John Baez, Bob Coecke. Rob Ghrist, Jamie Vicary 

My coauthors
John, again
Brandon Coya
Hugo Nava-Kopp
Blake Pollard
Pawe\l\ Soboc\'inski
Paolo Rapisarda

Writing adviser Rashmi Kumar

comments on drafts:
all of the above plus Omar Camarena, Dan Marsden, Bernhard Reinke, Jason Erbele,
Stefano Gogioso,

My partner, Stephanie Lin

And my family Mum, Dad, Justin, Calvin, Tania.

All the organisations: not only the Department of Computer Science and the
University of Oxford, who gave me space to work and, but the Clarendon Fund,
Hertford College, the Queen Elizabeth Scholarships, the Centre for Quantum
Technologies, Singapore, the Department of Mathematics at the University of Pennsylvania

